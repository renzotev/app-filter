var consulta_url=["?"];var $consultas_auto=function(g,b){if(b==0){var c="php/consult_autos.php"}else{var f=$("#marca").val();var e=$("#modelo").val();var a=$("#version").val();var d=$("#anio").val();if(b=="marca"){var c="php/consult_autos.php?marca="+f}else{if(b=="modelo"){var c="php/consult_autos.php?marca="+f+"&modelo="+e}else{if(b=="version"){var c="php/consult_autos.php?marca="+f+"&modelo="+e+"&version="+a}else{if(b=="anio"){var c="php/consult_autos.php?marca="+f+"&modelo="+e+"&version="+a+"&anio="+d}}}}}$("#loadingDiv").show();$.getJSON(c,function(k){var j=[];$.each(k.autos,function(m,o){if(b=="marca"){j.push("<option value="+o.modelo_id+">"+o.modelo+"</option>")}else{if(b=="modelo"){j.push("<option value="+o.version+">"+o.version+"</option>")}else{if(b=="version"){var n=o.anio.replace("+","%2B").replace(" ","%20");j.push("<option value="+n+">"+o.anio+"</option>")}else{var l=o.marca.replace(" ","%20");j.push("<option value="+l+">"+o.marca+"</option>")}}}});if(j.length!=0){var h=$(g).find("option[value='-1']").text();$(g).html("<option value='-1'>"+h+"</option>");$(g).append(j);$(g).parent().removeClass("input-disabled");$(g).prop("disabled",false)}$("#loadingDiv").hide()})};$("#marca").change(function(){var a=$(this).find("option:selected").val();consulta_url[1]="marca="+a;$("#version").html("<option value='-1'>Versión</option>");$("#anio").html("<option value='-1'>Año</option>");$("#version").parent().addClass("input-disabled");$("#anio").parent().addClass("input-disabled");$("#version").prop("disabled",true);$("#anio").prop("disabled",true);if(a=="-1"){$("#modelo").html("<option value='-1'>Modelo</option>");$("#modelo").parent().addClass("input-disabled");$("#modelo").prop("disabled",true);consulta_url.splice(1,4)}else{$consultas_auto("#modelo","marca")}$("#consultar").attr("href","#")});$("#modelo").change(function(){var a=$(this).find("option:selected").val();consulta_url[2]="&modelo="+a;$("#anio").html("<option value='-1'>Año</option>");$("#anio").parent().addClass("input-disabled");$("#anio").prop("disabled",true);if(a=="-1"){$("#version").html("<option value='-1'>Versión</option>");$("#version").parent().addClass("input-disabled");$("#version").prop("disabled",true);consulta_url.splice(2,3)}else{$consultas_auto("#version","modelo")}$("#consultar").attr("href","resultados.html"+consulta_url.join(""))});$("#version").change(function(){var a=$(this).find("option:selected").val();consulta_url[3]="&version="+a;if(a=="-1"){$("#anio").html("<option value='-1'>Año</option>");$("#anio").parent().addClass("input-disabled");$("#anio").prop("disabled",true);consulta_url.splice(3,2)}else{$consultas_auto("#anio","version")}$("#consultar").attr("href","resultados.html"+consulta_url.join(""))});$("#anio").change(function(){var a=$(this).find("option:selected").val();consulta_url[4]="&anio="+a;if(a=="-1"){consulta_url.splice(4,1)}$("#consultar").attr("href","resultados.html"+consulta_url.join(""))});$consultas_auto("#marca",0);(function(){var b=["#modelo","#version","#anio"];for(i=0;i<b.length;i++){var a=$(b[i]).find("option[value='-1']").text();$(b[i]).html("<option value='-1'>"+a+"</option>")}})();